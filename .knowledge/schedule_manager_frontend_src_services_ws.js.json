{"is_source_file": true, "format": "JavaScript", "description": "This file provides a WebSocket client implementation for live updates, including connection management, message handling, subscription to messages and status changes, and sending messages.", "external_files": ["process.env"], "external_methods": ["JSON.parse", "setTimeout", "clearTimeout"], "published": ["connectWS", "onMessage", "onStatus", "send"], "classes": [], "methods": [{"name": "connectWS()", "description": "Establishes a WebSocket connection to the server and sets up event handlers.", "scope": "", "scopeKind": ""}, {"name": "onMessage(cb)", "description": "Subscribes to incoming message data; returns an unsubscribe function.", "scope": "", "scopeKind": ""}, {"name": "onStatus(cb)", "description": "Subscribes to connection status changes; returns an unsubscribe function.", "scope": "", "scopeKind": ""}, {"name": "send(msg)", "description": "Sends a JSON-formatted message over the WebSocket connection if open.", "scope": "", "scopeKind": ""}, {"name": "notifyStatus(connected)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["JSON.parse", "setTimeout", "clearTimeout", "socket.send"], "search-terms": ["WebSocket client", "live updates", "auto-reconnect", "react environment variable", "ws.js"], "state": 2, "file_id": 16, "knowledge_revision": 33, "git_revision": "", "ctags": [{"_type": "tag", "name": "WS_URL", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^const WS_URL = process.env.REACT_APP_WS_URL || \"\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "connectWS", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^export function connectWS() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^    try { data = JSON.parse(ev.data); } catch { data = { type: \"raw\", payload: ev.data }; }$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "listeners", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^let listeners = new Set();$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "notifyStatus", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^function notifyStatus(connected) {$/", "language": "JavaScript", "kind": "function", "signature": "(connected)"}, {"_type": "tag", "name": "onMessage", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^export function onMessage(cb) {$/", "language": "JavaScript", "kind": "function", "signature": "(cb)"}, {"_type": "tag", "name": "onStatus", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^export function onStatus(cb) {$/", "language": "JavaScript", "kind": "function", "signature": "(cb)"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^    try { data = JSON.parse(ev.data); } catch { data = { type: \"raw\", payload: ev.data }; }$/", "language": "JavaScript", "kind": "property", "scope": "data", "scopeKind": "class"}, {"_type": "tag", "name": "reconnectDelay", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^let reconnectDelay = 1000;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^export function send(msg) {$/", "language": "JavaScript", "kind": "function", "signature": "(msg)"}, {"_type": "tag", "name": "socket", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^let socket = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "statusListeners", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^let statusListeners = new Set();$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1485/schedule_manager_frontend/src/services/ws.js", "pattern": "/^    try { data = JSON.parse(ev.data); } catch { data = { type: \"raw\", payload: ev.data }; }$/", "language": "JavaScript", "kind": "property", "scope": "data", "scopeKind": "class"}], "hash": "330ebea4f02d5f7705c63e024c88aa73", "format-version": 4, "code-base-name": "schedule_manager_frontend", "filename": "schedule_manager_frontend/src/services/ws.js", "fields": [{"name": "let listeners = new Set();", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "try { data = JSON.parse(ev.data); } catch { data = { type: \"raw\", payload: ev.data }; }", "scope": "data", "scopeKind": "class", "description": "unavailable"}, {"name": "let reconnectDelay = 1000;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let socket = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let statusListeners = new Set();", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"33": ""}]}